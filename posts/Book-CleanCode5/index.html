<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[Book] Clean Code - 4주차 (7장, 8장)" /><meta property="og:locale" content="ko" /><meta name="description" content="오류 처리" /><meta property="og:description" content="오류 처리" /><link rel="canonical" href="http://f-hiller.github.io/posts/Book-CleanCode5/" /><meta property="og:url" content="http://f-hiller.github.io/posts/Book-CleanCode5/" /><meta property="og:site_name" content="F-hiller’s blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-10-02T01:00:56+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Book] Clean Code - 4주차 (7장, 8장)" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-10-03T15:58:44+09:00","datePublished":"2023-10-02T01:00:56+09:00","description":"오류 처리","headline":"[Book] Clean Code - 4주차 (7장, 8장)","mainEntityOfPage":{"@type":"WebPage","@id":"http://f-hiller.github.io/posts/Book-CleanCode5/"},"url":"http://f-hiller.github.io/posts/Book-CleanCode5/"}</script><title>[Book] Clean Code - 4주차 (7장, 8장) | F-hiller's blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="F-hiller's blog"><meta name="application-name" content="F-hiller's blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" type="text/css" href="/assets/css/linkpreview.css" media="screen"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/user/fhiller.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">F-hiller's blog</a></div><div class="site-subtitle font-italic">1일 1배움</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/F-hiller" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jjun6912','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Book] Clean Code - 4주차 (7장, 8장)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>[Book] Clean Code - 4주차 (7장, 8장)</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1696176056" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 2, 2023 </em> </span> <span> Updated <em class="" data-ts="1696316324" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 3, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/F-hiller">F-hiller</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2686 words"> <em>14 min</em> read</span></div></div></div><div class="post-content"><h1 id="오류-처리">오류 처리</h1><p>오류가 발생할 확률이 0이 되는 일은 존재하지 않는다. 오류 처리를 어떻게 하느냐에 따라 코드의 논리를 잘 드러내는지가 결정된다고 볼 수 있다.</p><h3 id="오류-코드보다-예외를-사용하라"><span class="mr-2">🧹오류 코드보다 예외를 사용하라</span><a href="#오류-코드보다-예외를-사용하라" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>앞선 챕터들에서도 몇 번 이야기가 나왔던 이야기이다. 오래된 언어들은 예외를 지원하지 않는 경우가 많았고 오류를 처리하고 보고하는 방법이 제한적이었기에 오류 코드를 사용했다. 하지만 Java의 Try-Catch-Finally 구문과 같이 Exception 처리를 지원하는 언어라면 해당 기능을 통해서 오류 처리와 기능 부분을 구분하도록 하자.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">// class 안의 함수들이다.</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendShutDown</span><span class="o">(){</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">tryToShutDown</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">DeviceShutDownError</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">tryToShutDown</span> <span class="o">()</span> <span class="kd">throws</span> <span class="nc">DeviceShutDownError</span> <span class="o">{</span>
    <span class="c1">// 논리 전개...</span>
<span class="o">}</span>

</pre></table></code></div></div><p><br /></p><h3 id="checked-exception-vs-unchecked-exception"><span class="mr-2">🧹Checked Exception VS Unchecked Exception</span><a href="#checked-exception-vs-unchecked-exception" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>확인 예외, 미확인 예외를 명확히 알지 못해 검색을 통해 찾아보았다. <a href="https://devlog-wjdrbs96.tistory.com/351">Checked VS Unchecked</a><br /> 간단히 정리하자면 확인 예외는 반드시 try-catch를 통해서 오류 처리 코드를 작성해야하는 예외들이며, 비확인 예외는 RuntimeException의 범주에 속하는 예외들로 개발자에 의해 선택적으로 try-catch 구문을 작성할 수 있다. 확인 예외는 아래 코드와 같이 throws를 붙여줘야한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></table></code></div></div><p>초창기 자바는 확인 예외를 좋다고 여겼지만 현재는 Open-Closed Principle을 위반하는 문제가 있는 과정이라고 여긴다. 하위 단계 함수에서 예외를 throw한다면 해당 코드를 포함하는 모든 상위 단계 함수 선언부에 throws를 추가하여 수정해야한다.<br /> <br /></p><p>따라서, 확인 예외를 사용함으로써 모든 예외를 확인할 필요가 있는 경우를 제외하고는 일반적으로 Unchecked Exception의 사용을 권장한다.<br /> <br /></p><h3 id="호출자를-고려해-예외-클래스를-정의하라"><span class="mr-2">🧹호출자를 고려해 예외 클래스를 정의하라</span><a href="#호출자를-고려해-예외-클래스를-정의하라" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>이 부분은 글을 읽어도 이해가 되지 않는 부분들이 존재해서 코드를 대부분 적어보려고 한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="nc">ACMEPort</span> <span class="n">port</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ACMEPort</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">port</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">DeviceReseponseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">reportPortError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">"Device response exception"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ATM1212UnlockedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">reportPortError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">"Unlock exception"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span> 
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><p>호출해서 사용하는 외부 라이브러리 API가 존재한다면 아래와 같이 Wrapper Class를 통해서 예외를 작성하는 것이 더 좋다고 한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="c1">// 사용 예시</span>
<span class="nc">LocalPort</span> <span class="n">port</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LocalPort</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">port</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">PortDeviceFailure</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">retportError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">geMessage</span><span class="o">(),</span> <span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>

<span class="c1">// Wrapper Class 파일</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LocalPort</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">ACMEPort</span> <span class="n">innerPort</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LocalPort</span><span class="o">(</span><span class="n">it</span> <span class="n">portNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">innerPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ACMEPort</span><span class="o">(</span><span class="n">portNumber</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">open</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">innerPort</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">DeviceReseponseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">PortDeviceFailure</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ATM1212UnlockedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">PortDeviceFailure</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span> 
    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Wrapper 클래스를 통해서 외부 라이브러리와 프로그램 사이의 의존성을 줄이며, 다른 라이브러리로 전환하기에도 용이하다고 한다.<br /> <br /></p><h3 id="정상-흐름을-정의하라"><span class="mr-2">🧹정상 흐름을 정의하라</span><a href="#정상-흐름을-정의하라" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>try-catch 구문을 사용하지 않고도 진행할 수 있는지 확인해봐야한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">try</span> <span class="o">{</span>
    <span class="nc">MealExpenses</span> <span class="n">expenses</span> <span class="o">=</span> <span class="n">expenseReportDAO</span><span class="o">.</span><span class="na">getMeals</span><span class="o">(</span><span class="n">employeee</span><span class="o">.</span><span class="na">getID</span><span class="o">());</span>
    <span class="n">m_total</span> <span class="o">+=</span> <span class="n">expenses</span><span class="o">.</span><span class="na">getTotal</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">MealExpensesNotFound</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">m_total</span> <span class="o">+=</span> <span class="n">getMealPerDiem</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><p>expenses.getTotal()에서 에러를 발생하는 대신 getMealPerDiem에 해당하는 기능을 수행하면 될 것이다. 또한, expenses에 null이 올 수도 있으므로 expenseReportDAO에는 항상 MealExpenses 객체를 반환하도록 수정해주어야한다. 이를 특수 사례 패턴(Special Case Pattern)이라고 하며 클래스를 만들거나 객체를 조작해 특수 사례를 처리하는 방식이라고 한다.<br /> <a href="https://apiumhub.com/tech-blog-barcelona/special-case-pattern/">특수 사례 패턴 1</a><br /> <a href="https://java-design-patterns.com/patterns/special-case/#explanation">특수 사례 패턴 2</a><br /> <br /></p><h3 id="null을-반환하지-마라"><span class="mr-2">🧹null을 반환하지 마라</span><a href="#null을-반환하지-마라" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>바로 앞에서 이야기한 것처럼 메소드릐 반환 값이 null이 되는 경우 null 확인을 하지 않아서 발생하는 NullPointerException과 같은 문제가 매우 자주 발생할 수 있다. 따라서 되도록 null을 반환하지 않게, 오류가 발생하지 않도록 특수 사례 패턴의 적용을 고려해보자.<br /> <br /></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">getEmployees</span><span class="o">();</span>
<span class="k">if</span><span class="o">(</span><span class="n">employees</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="nc">Employee</span> <span class="n">e</span> <span class="o">:</span> <span class="n">employees</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">totalPay</span> <span class="o">+=</span> <span class="n">e</span><span class="o">.</span><span class="na">getPay</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>만약 위 코드에서 getEmployees()라는 함수가 null 대신 Collections.emptyList()와 같이 비어있는 List를 반환한다면 if 문을 없애도 정상적으로 작동할 것이다.<br /> <br /></p><ul><li>null을 전달하지 마라</ul><p>앞에서 이야기한 내용의 연장선이다. 정상적인 인수로 null을 기대하는 API가 아니라면 메서드로 null을 전달하는 것을 최대한 피하는 것이 좋다. 만약 어떤 이유로든 null의 전달을 허용한다면 해당 문제를 처리할 코드가 필요해지며 이는 클린하지 않은 코드가 될 확률이 높아질 것이다.<br /> <br /></p><h2 id="결론"><span class="mr-2">결론</span><a href="#결론" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>이번 챕터에서는 코드를 통한 예제를 많이 가져왔다. 단순히 말로만 듣고 이해하기에는 어려운 부분들이 있어서 코드를 통해 어떤 부분에 문제가 있어서 사용해서는 안되는지 확인할 수 있었던 것 같다.<br /> null을 인수로 넣거나 반환하는 함수를 많이 사용했었고 관련된 문제들을 많이 겪어서 책의 조언에 따라 사용하지 않아야함을 상기하게 된 것 같다.<br /> <br /></p><h1 id="경계">경계</h1><p>해당 챕터에서는 외부 코드를 어떻게 클린하게 적용할 수 있을지에 대해서 이야기한다.<br /> <br /></p><h3 id="외부-코드-사용하기"><span class="mr-2">🧹외부 코드 사용하기</span><a href="#외부-코드-사용하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>인터페이스 제공자들은 더 많은 고객층을 확보하기 위해 적용성을 최대한으로 넓히려고 한다. 반면, 사용자들은 자신의 요구에 더 집중된 인터페이스를 요구한다. 이러한 간격 사이에서 문제점들이 발생하고는 한다.<br /> <br /></p><p>그 예시로, java.util.Map이 있다. Map은 광범위한 기능을 제공한다. clear() 함수로 누구나 객체의 정보를 삭제할 수 있으며 저장을 위한 객체 유형을 제한하지 않는다.<br /> <code class="language-plaintext highlighter-rouge">Map sensors = new HashMap();</code><br /> <code class="language-plaintext highlighter-rouge">Sensor s = (Sensor)sensors.get(sensorId);</code><br /> 이에 따라, Map이 반환하는 Object를 올바른 유형으로 바꿔주는 과정이 추가되어야하며 그 책임은 Map의 사용자에게 있다.<br /> <br /></p><p><code class="language-plaintext highlighter-rouge">Map&lt;String, Sensor&gt; sensors = new HashMap&lt;Sensor&gt;();</code><br /> <code class="language-plaintext highlighter-rouge">Sensor s = sensors.get(sensorId);</code><br /> 위 코드와 같이 사용할 수 있기는 하지만, “필요하지 않은 기능까지 제공한다”는 문제가 해결되지는 않는다.<br /> <br /></p><p>또한, 인터페이스도 변할 가능성이 있는 존재이기에 사용을 금지하는 시스템도 존재했다. 만약 인터페이스가 바뀐다면 바꿔야할 코드의 범위가 매우 광범위해질 것이다.<br /> <br /></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sensors</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Map</span> <span class="n">sensors</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">();</span>
    
    <span class="kd">public</span> <span class="nc">Sensor</span> <span class="nf">getById</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="nc">Sensor</span><span class="o">)</span><span class="n">sensors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>위 코드처럼 Map의 사용을 특정 클래스를 통해서 제공함으로써 범위를 제안하는 방법도 있다. 반드시 캡슐화를 하라는 의미는 아니며 경계를 넘어다니면서 사용하는 것은 오류를 유발할 수 있으므로 자제하라는 뜻이다.<br /> <br /></p><ul><li>경계 살피고 익히기</ul><p>외부 코드를 프로젝트에 사용하기 위해서는 코드를 익히고 통합하는 작업을 거쳐야 한다. 하지만 이는 쉬운 작업이 아니며 학습 테스트를 통해서 진행하는 것이 합리적이다. 학습 테스트는 간단한 테스트 케이스를 통해서 실제로 작동하는 방식을 확인해보는 과정으로 <code class="language-plaintext highlighter-rouge">테스트+구글링+공식문서</code>를 통해서 API에 익숙해질 수 있도록 해보자.<br /> <br /></p><ul><li>학습 테스트는 공짜 이상이다</ul><p>학습 테스트는 API 전체를 배우는 것에 비해서 필요한 지식만 확보하는 손쉬운 방법이다. 이해도를 높여주며 투자하는 노력보다 얻는 성과가 크다. API의 새로운 버전이 나오더라도 기존에 만들어둔 테스트를 통해서 다르게 작동하는지를 1차적으로 확인할 수 있다.<br /> 이러한 테스트 케이스가 없다면, 오래된 버전을 계속 사용하려는 유혹에 빠질 수 있다.<br /> <br /></p><h3 id="아직-존재하지-않는-코드를-사용하기"><span class="mr-2">🧹아직 존재하지 않는 코드를 사용하기</span><a href="#아직-존재하지-않는-코드를-사용하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>경계는 앞서 설명한 내용들도 있지만 알지 못하는 영역에 대한 경계도 존재한다. 지식의 경계를 넘어선 코드는 작성하기 힘들며 일반적으로 프로젝트에서는 지식이 많은 부분에서 지식의 경계 쪽으로 코드를 작성해나간다. 팀 단위로 이루어진 프로젝트라면 경계 바깥 쪽은 오픈소스와 같이 외부의 코드를 이용하거나 다른 팀에서 작성하고 있을 것이다.<br /> <br /></p><p><a href="https://jusungpark.tistory.com/22">Adapter 패턴</a>을 사용한다면 개발자가 바라는 인터페이스를 구현하기 이전에 정의할 수 있으며 Adapter를 통해서 구현 후 발생하는 차이점들을 해결할 수 있다. 또한 Fake 클래스를 사용하면서 테스트를 진행할 수도 있게 된다.<br /> <br /></p><ul><li>깨끗한 경계</ul><p>경계에서는 변경과 같은 특별한 일들이 자주 일어난다. 경계에 위치하는 코드들은 깔끔히 분리되어야 하며 테스트 케이스를 통해 잘 관리되어야한다. 의존에 관한 문제도 외부 코드보다는 통제 가능한 팀의 코드에 존재하는게 좋다.<br /> <br /></p><h2 id="결론-1"><span class="mr-2">결론</span><a href="#결론-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>학습 테스트, Adapter 패턴에 대해서 알게 되었고 규모있는 프로젝트들에서 이러한 방식의 장점을 몸소 체험해보고 싶다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/backend/'>Backend</a>, <a href='/categories/books/'>Books</a>, <a href='/categories/clean-code/'>Clean Code</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/clea-code/" class="post-tag no-text-decoration" >clea code</a> <a href="/tags/book/" class="post-tag no-text-decoration" >book</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5BBook%5D+Clean+Code+-+4%EC%A3%BC%EC%B0%A8+%287%EC%9E%A5%2C+8%EC%9E%A5%29+-+F-hiller%27s+blog&url=http%3A%2F%2Ff-hiller.github.io%2Fposts%2FBook-CleanCode5%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5BBook%5D+Clean+Code+-+4%EC%A3%BC%EC%B0%A8+%287%EC%9E%A5%2C+8%EC%9E%A5%29+-+F-hiller%27s+blog&u=http%3A%2F%2Ff-hiller.github.io%2Fposts%2FBook-CleanCode5%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=http%3A%2F%2Ff-hiller.github.io%2Fposts%2FBook-CleanCode5%2F&text=%5BBook%5D+Clean+Code+-+4%EC%A3%BC%EC%B0%A8+%287%EC%9E%A5%2C+8%EC%9E%A5%29+-+F-hiller%27s+blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Book-CleanCode7/">[Book] Clean Code - 6주차 (11, 12장)</a><li><a href="/posts/Book-CleanCode3/">[Book] Clean Code - 2주차 (4장)</a><li><a href="/posts/Book-CleanCode4/">[Book] Clean Code - 3주차 (5장, 6장)</a><li><a href="/posts/Book-CleanCode5/">[Book] Clean Code - 4주차 (7장, 8장)</a><li><a href="/posts/Book-CleanCode2/">[Book] Clean Code - 2주차 (3장)</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/clean-code/">clean code</a> <a class="post-tag" href="/tags/level3/">level3</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/greedy/">greedy</a> <a class="post-tag" href="/tags/bfs/">bfs</a> <a class="post-tag" href="/tags/dfs/">dfs</a> <a class="post-tag" href="/tags/dp/">dp</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Book-CleanCode1/"><div class="card-body"> <em class="small" data-ts="1693744130" data-df="ll" > Sep 3, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Book] Clean Code - 1주차 (0~2장)</h3><div class="text-muted small"><p> 0. 들어가면서 코드 작성 원칙, 패턴, 실기를 설명하는 파트. 사례 연구를 통해 문제를 해결할 수 있는 코드로 바꾸는 연습 파트. 모든 내용을 정리해서 코드 스멜, 휴리스틱과 같은 면으로 분석한 결과 파트. 클린 코드 책은 위 3가지 파트로 구성되어있다고 한다. 책을 읽으면서 내용을 단락별로 요약하고 해당 단락의 끝에 느끼거나 배운 점들에...</p></div></div></a></div><div class="card"> <a href="/posts/Book-CleanCode2/"><div class="card-body"> <em class="small" data-ts="1694528421" data-df="ll" > Sep 12, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Book] Clean Code - 2주차 (3장)</h3><div class="text-muted small"><p> 함수 🧹짧은 함수 함수는 짧을 수록 읽기 좋은 경향을 가진다. 하나의 함수가 10줄이 안되면 좋겠다고 필자는 이야기한다. 그렇게 되면 중첩 구조가 생기는 경우나 들여쓰기가 많아지는 경우도 발생하지 않으며 읽고 이해하기 쉬워진다. 🧹한 가지 일을 하는 함수 SOLID 원칙 중 단일 책임 원칙과 유사하다는 생각이 들었다. 함수는 한 ...</p></div></div></a></div><div class="card"> <a href="/posts/Book-CleanCode3/"><div class="card-body"> <em class="small" data-ts="1694529089" data-df="ll" > Sep 12, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Book] Clean Code - 2주차 (4장)</h3><div class="text-muted small"><p> 주석 글쓴이는 코드로 의도를 표현하지 못해 사용하는 필요악이라고 주석을 설명한다. 하지만, 그 마저도 거짓말이 많아 믿기가 힘들다고 한다. 커지는 코드 속에서 주석을 유지보수하는 것은 현실적으로 불가능하다. 해당 파트에서 작성하는 내용들은 주로 주석의 사용에 대해 비판적인 내용들이며 사용을 자제하기를 바라는 내용들로 구성되어있다. 🧹나쁜 코드...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Book-CleanCode4/" class="btn btn-outline-primary" prompt="Older"><p>[Book] Clean Code - 3주차 (5장, 6장)</p></a> <a href="/posts/Book-CleanCode6/" class="btn btn-outline-primary" prompt="Newer"><p>[Book Clean Code - 5주차 (9, 10장)</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/F-hiller">F-hiller</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/clean-code/">clean code</a> <a class="post-tag" href="/tags/level3/">level3</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/greedy/">greedy</a> <a class="post-tag" href="/tags/bfs/">bfs</a> <a class="post-tag" href="/tags/dfs/">dfs</a> <a class="post-tag" href="/tags/dp/">dp</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
